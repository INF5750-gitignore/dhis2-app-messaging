<div class="container" ng-controller="ShowAllMessages" id="rootElement">
	<div class="header vspace05">
		<div ng-show="online"  id="messageListTitle">Messages <div class="badge totalUnread">{{(messages|filter:unreadMessages).length}}</div></div>
		<div ng-hide="online"  id="messageListTitle">Messages (offline) <div class="badge">{{(messages|filter:unreadMessages).length}}</div></div>
	</div>

	<div class="row messageControlPanel vspace10">

		<span class="col-xs-12 col-sm-4 vspace05">
			<select class="form-control messageFilterSelect" ng-model="messageFilter" ng-options="filter.display for filter in filters"></select>
		</span>

		<span class="xs-hidden col-sm-1"></span>

		<span class="btn-group col-xs-3 col-sm-1 col-sm-push-5 col-md-1 vspace05">
			<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Options<div class="down-arrow"></div></button>
			<ul class="dropdown-menu" role="menu">
				<li><a href="" ng-click="updateReadStatus(true)">Mark as read</a></li>
				<li><a href="" ng-click="updateReadStatus(false)">Mark as unread</a></li>
				<li class="divider"></li>
				<li><a href="" ng-click="delete()">Delete</a></li>
			</ul>
		</span>

		<span class="col-xs-9 col-sm-6 col-sm-pull-2 vspace05">
			<input class="form-control" type="text" id="searchBox" ng-model="searchText" placeholder="Search"></input>
		</span>

	</div>
	<!-- <div ng-repeat="page in dhis.pages"> -->
	<div>
		<ul class="list-group">
			<li ng-repeat="message in messages | filter: searchFilter | orderBy:'created':true | filterMessageDisplay:messageFilter" class="row list-group-item message-list" ng-class="{unread: message.read == false}">


					<span class="col-xs-1 col-lg-1 messageGlyph">
						<input ng-model="message._selected" type="checkbox" value="{{ message.id }}"></input>
						<span class="glyphicon glyphicon-star star" ng-hide="message.followUp==false"></span>

					</span>

					<span>
						<a class="fillthespan" href="#msg/{{ message.id }}">
							<span class="col-xs-7 col-lg-4 ellipsize">

								<span ng-show="{{ getName(message).length }}" >{{ getName(message) }}</span>
								<span ng-hide="{{ getName(message).length }}" >(System message)</span>

								<span>({{message.messageCount}})</span>
							</span>

							<span class="col-xs-3 col-lg-2 col-lg-push-4 dateDisplay ellipsize">{{ message.created | date : 'dd MMM yyyy' }}</span>
							<span class="col-xs-12 col-lg-5 col-lg-pull-4 ellipsize">{{ message.displayName }}</span>
						</a>
					</div>


				<div ng-show="dhis.busy" class="loader">
					<span class="glyphicon glyphicon-refresh btn-lg spin"></span> Loading...
				</div>
				<div ng-hide="dhis.busy" class="loader">
					<span class="btn-lg"></span>
				</div>
			</li>
		</ul>
	</div>

</div>

<!-- <span ng-show="{{ message.lastSenderFirstname.length }}" class="col-xs-6 col-md-3 col-lg-2 ellipsize">{{ message.lastSenderFirstname }} {{ message.lastSenderSurname }}</span>
<span ng-hide="{{ message.lastSenderFirstname.length }}" class="col-xs-6 col-md-3 col-lg-2 ellipsize">(System message)</span>

<span class="col-xs-3 col-md-2 col-lg-1 col-md-push-4 col-lg-push-6 badge">{{ message.created | date : 'dd MMM yyyy' }}</span>


<span class="col-xs-12 col-md-4 col-lg-3 col-md-pull-4 col-lg-pull-2 ellipsize">{{ message.displayName }}</span>
<span class="col-xs-12 col-md-9 col-lg-4 col-md-offset-3 col-lg-offset-0 col-lg-pull-2 ellipsize">{{ message.messages[0].name }}</span>
-->
